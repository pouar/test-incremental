<!DOCTYPE html>
<head>
<title>Test incremental</title>

<script language="JavaScript">

var buyCost = 0;
var buyable = true;
var count;
var buildingModifier = 0;
var cost = 0;
var currentCost = [10, 25, 50, 100]
var money = 0;
var nlogn = nlogn();

var buildingA = 0;

function beginGame() {
    if(typeof(Worker) !== "undefined") {
        if(typeof(count) == "undefined") {
            count = new Worker("counterWorker.js");
        }
        count.onmessage = function(event) {
            document.getElementById("result").innerHTML = event.data;
            money = event.data
        };
    } else {
        document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Workers...";
    }
}

function nlogn(n) {
    return n * Math.log10(n);
}

function checkBuyable() {
    if(cost < money) {
        buyable = true; 
    } else {
        buyable = false;
    }
}

function buyA() {
    cost = currentCost[0];
    checkBuyable();
    if (buyable == true) {
        count.postMessage({action:'subtract', amount:currentCost[0], once:true});
        currentCost[0] = Math.ceiling(nlogn(currentCost[0]+1))
        buildingA = buildingA + 1
    } else {
        document.write("Too Expensive!")
    }
}

document.getElementById("CostA").innerHTML = currentCost[0]

</script>

</head>

<body>
Your money: <output id="result"></output><br><br>

<button onclick="buyA();">Buy Building A</button><br>
<output id="CostA"></output>

<script language="JavaScript">

beginGame();

</script>

</body>
